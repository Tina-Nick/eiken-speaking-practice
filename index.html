<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>英検スピーキング練習ツール</title>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #f8f8f8; }
    .controls { margin-bottom: 1em; }
    button { margin-right: 10px; margin-bottom: 10px; padding: 8px 12px; border: none; background-color: #4caf50; color: white; border-radius: 5px; cursor: pointer; }
    button:hover { background-color: #45a049; }
    .question-box { background: white; padding: 1em; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); margin-bottom: 1em; }
    .answer { margin-top: 10px; background: #eef; padding: 10px; border-radius: 5px; }
    .hidden { display: none; }
  </style>
</head>
<body>
  <h1>英検スピーキング練習ツール（3級〜準2級）</h1>
  <div class="controls">
    <label>級: 
      <select id="grade">
        <option value="grade3">3級</option>
        <option value="gradePre2">準2級</option>
      </select>
    </label>
    <label>質問タイプ:
      <select id="type">
        <option value="q1">質問①</option>
        <option value="q2">質問②</option>
      </select>
    </label>
    <button id="nextBtn">次の質問</button>
  </div>

  <div class="question-box">
    <h2 id="question"></h2>
    <button id="toggleTranslationBtn">和訳を表示</button>
    <div id="translation" class="answer hidden"></div>
    <button id="toggleYesAnswerBtn">Yesの模範解答を表示</button>
    <div id="yesAnswer" class="answer hidden"></div>
    <button id="toggleNoAnswerBtn">Noの模範解答を表示</button>
    <div id="noAnswer" class="answer hidden"></div>
  </div>

  <script>
    const data = {
      grade3: {
        q1: [
          {
            question: "Do you like music?",
            translation: "あなたは音楽が好きですか？",
            answer: "Yes, I like music because it makes me feel happy and relaxed.",
            answer_no: "No, I don’t like music very much because I prefer quiet places."
          },
          {
            question: "Do you play any sports?",
            translation: "あなたは何かスポーツをしますか？",
            answer: "Yes, I play soccer every weekend with my friends.",
            answer_no: "No, I don’t play sports because I’m not good at them."
          }
        ],
        q2: [
          {
            question: "What season do you like the best?",
            translation: "あなたが一番好きな季節は何ですか？",
            answer: "I like spring the best because the weather is nice and flowers bloom."
          },
          {
            question: "What do you usually do after school?",
            translation: "あなたはふだん放課後に何をしますか？",
            answer: "I usually do my homework and then watch TV."
          }
        ]
      },
      gradePre2: {
        q1: [],
        q2: []
      }
    };

    let currentGrade = "grade3";
    let currentType = "q1";
    let currentIndex = 0;
    let translationShown = false;
    let yesAnswerShown = false;
    let noAnswerShown = false;

    const gradeSelect = document.getElementById("grade");
    const typeSelect = document.getElementById("type");
    const nextBtn = document.getElementById("nextBtn");
    const questionText = document.getElementById("question");
    const translationDiv = document.getElementById("translation");
    const toggleTranslationBtn = document.getElementById("toggleTranslationBtn");
    const toggleYesAnswerBtn = document.getElementById("toggleYesAnswerBtn");
    const toggleNoAnswerBtn = document.getElementById("toggleNoAnswerBtn");
    const yesAnswerDiv = document.getElementById("yesAnswer");
    const noAnswerDiv = document.getElementById("noAnswer");

    function updateQuestion() {
      const list = data[currentGrade][currentType];
      if (!list || list.length === 0) {
        questionText.textContent = "このタイプの質問はまだ登録されていません。";
        translationDiv.classList.add("hidden");
        yesAnswerDiv.classList.add("hidden");
        noAnswerDiv.classList.add("hidden");
        return;
      }
      const q = list[currentIndex];
      questionText.textContent = q.question;
      translationDiv.textContent = q.translation;
      yesAnswerDiv.textContent = q.answer;
      noAnswerDiv.textContent = q.answer_no || "(Noの模範解答はありません)";
      translationShown = false;
      yesAnswerShown = false;
      noAnswerShown = false;
      translationDiv.classList.add("hidden");
      yesAnswerDiv.classList.add("hidden");
      noAnswerDiv.classList.add("hidden");
      toggleTranslationBtn.textContent = "和訳を表示";
      toggleYesAnswerBtn.textContent = "Yesの模範解答を表示";
      toggleNoAnswerBtn.textContent = "Noの模範解答を表示";
    }

    gradeSelect.addEventListener("change", () => {
      currentGrade = gradeSelect.value;
      currentIndex = 0;
      updateQuestion();
    });

    typeSelect.addEventListener("change", () => {
      currentType = typeSelect.value;
      currentIndex = 0;
      updateQuestion();
    });

    nextBtn.addEventListener("click", () => {
      const list = data[currentGrade][currentType];
      if (!list || list.length === 0) return;
      currentIndex = (currentIndex + 1) % list.length;
      updateQuestion();
    });

    toggleTranslationBtn.addEventListener("click", () => {
      translationShown = !translationShown;
      translationDiv.classList.toggle("hidden");
      toggleTranslationBtn.textContent = translationShown ? "和訳を隠す" : "和訳を表示";
    });

    toggleYesAnswerBtn.addEventListener("click", () => {
      yesAnswerShown = !yesAnswerShown;
      yesAnswerDiv.classList.toggle("hidden");
      toggleYesAnswerBtn.textContent = yesAnswerShown ? "Yesの模範解答を隠す" : "Yesの模範解答を表示";
    });

    toggleNoAnswerBtn.addEventListener("click", () => {
      noAnswerShown = !noAnswerShown;
      noAnswerDiv.classList.toggle("hidden");
      toggleNoAnswerBtn.textContent = noAnswerShown ? "Noの模範解答を隠す" : "Noの模範解答を表示";
    });

    updateQuestion();
  </script>
</body>
</html>
